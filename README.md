# Trapezoidal Map for Point Location

A Python implementation of the trapezoidal map data structure for efficient point location in planar subdivisions. 

## About
This project was developed in collaboration with [@vimzoomer](https://github.com/vimzoomer) who:
- Developed visualization system
- Implemented multiple trapezoids splitting algorithm
- Managed project structure
- Wrote performance tests

## Features
- Constructs trapezoidal maps from non-intersecting line segments
- O(log n) expected time point location queries
- Interactive visualizations
- Step-by-step algorithm demonstration

## Use Cases
- **GIS Systems**: Locating points in geographic regions
- **CAD Software**: Point-in-polygon tests

## Input segments resembling Poland's administrative divisions
![Example Input](./demo/state_map_poland.png)

## Map building and point (in the middle) query visualization
![Visualization of point query and map creation ](./demo/animation.gif)

## Example performance test input (10000 segments)
![Example Output](./demo/performance_test.png)

## Performance Benchmarks

### Trapezoidal Map Construction Times
_Segments generated by `generateParallelSegments`_

| Segments | Trial 1 | Trial 2 | Trial 3 | Trial 4 | Trial 5 | Trial 6 | Trial 7 | Trial 8 | Trial 9 | Trial 10 | **Avg** |
|----------|---------|---------|---------|---------|---------|---------|---------|---------|---------|----------|---------|
| 100     | 0.0096  | 0.0070  | 0.0065  | 0.0056  | 0.0061  | 0.0053  | 0.0050  | 0.0057  | 0.0049  | 0.0049   | 0.0061  |
| 500     | 0.0931  | 0.0305  | 0.0647  | 0.0287  | 0.0310  | 0.0912  | 0.0526  | 0.0360  | 0.0318  | 0.0863   | 0.0546  |
| 1000    | 0.0829  | 0.1424  | 0.0659  | 0.1067  | 0.1427  | 0.0610  | 0.0639  | 0.1542  | 0.0708  | 0.0622   | 0.0953  |
| 5000    | 0.6263  | 0.5453  | 0.5967  | 0.6595  | 0.3793  | 0.7787  | 0.3789  | 0.8599  | 0.4069  | 0.3700   | 0.5601  |
| 10000   | 1.7547  | 1.9813  | 0.9155  | 1.9323  | 0.8247  | 0.9870  | 3.1392  | 0.8688  | 0.8391  | 2.9034   | 1.6146  |
| 50000   | 8.4997  | 10.5326 | 10.1266 | 5.1653  | 15.2924 | 16.2223 | 4.8730  | 19.2892 | 5.0062  | 5.0414   | 10.0049 |

### Point Location Query Times
_Points generated via `generateUniformPoints`_

| Segments | Trial 1 | Trial 2 | Trial 3 | Trial 4 | Trial 5 | Trial 6 | Trial 7 | Trial 8 | Trial 9 | Trial 10 | **Avg** |
|----------|---------|---------|---------|---------|---------|---------|---------|---------|---------|----------|---------|
| 100     | 1.5313  | 0.5947  | 0.9880  | 0.7220  | 0.8215  | 0.6807  | 0.6387  | 1.2835  | 1.3339  | 0.6941   | 0.9798  |
| 500     | 0.9320  | 1.1319  | 1.0255  | 1.0853  | 1.5099  | 1.2382  | 1.3465  | 0.8174  | 1.0834  | 1.8391   | 1.2003  |
| 1000    | 1.0553  | 1.1695  | 1.1695  | 1.4719  | 1.5243  | 1.3510  | 1.3898  | 0.9354  | 2.0643  | 1.7315   | 1.2845  |
| 5000    | 1.6119  | 1.7134  | 2.6937  | 1.7870  | 2.1213  | 1.6600  | 1.8701  | 1.4988  | 2.7201  | 2.4936   | 2.0344  |
| 10000   | 1.5237  | 2.1487  | 2.2210  | 2.0080  | 2.0080  | 1.6129  | 2.2762  | 1.8840  | 3.1545  | 2.6270   | 2.2496  |
| 50000   | 2.2620  | 2.3557  | 2.5004  | 1.6129  | 1.9988  | 2.5522  | 2.6715  | 3.8053  | 4.1065  | 2.5780   | 2.6594  |
| 100000  | 2.7175  | 3.1884  | 2.5069  | 3.0281  | 2.5485  | 2.7402  | 2.8813  | 3.6517  | 3.5064  | 3.7918   | 3.1054  |

## Tech Stack
- **Python 3**
- **[Visualizer made by KN BIT](https://github.com/aghbit/Algorytmy-Geometryczne/tree/master/bitalg/visualizer)** for visualization
- **Jupyter Notebook** for interactive demos

## Installation
```bash
git clone https://github.com/yourusername/trapezoidal-map.git
cd trapezoidal-map
pip install -r requirements.txt